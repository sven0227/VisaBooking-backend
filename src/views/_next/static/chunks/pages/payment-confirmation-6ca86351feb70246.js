(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9067],{75180:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment-confirmation",function(){return s(82276)}])},82276:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var n=s(85893),a=s(67294),i=s(11163),r=s(9008),c=s.n(r),o=s(30152),l=s(61953),d=s(49837),u=s(91359),h=s(29630),p=s(5464),m=s(91291),x=s(86501),f=s(31670);let g=e=>{let{isLoading:t}=e;return console.log(t),(0,n.jsx)("div",{children:t&&(0,n.jsxs)(l.Z,{sx:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1e4,background:"#000000dd",display:"flex",alignItems:"center",justifyContent:"center",cursor:"progress"},children:[(0,n.jsx)(f.s5,{strokeColor:"grey",strokeWidth:"5",animationDuration:"0.75",width:"50",visible:!0}),(0,n.jsx)(h.Z,{variant:"h6",sx:{ml:1},children:"LOADING..."})]})})},w=(0,m.J)("pk_test_51LyDugD9UnFHOWqaJq4Qv8lNEeoxGna2GDX2i6AyWvtniiZiFOprj7UHYvetK10etR4a3tWlpaZl1RiOB4OvcTKq00ELpxBTjH"),j=()=>{let e=(0,i.useRouter)(),[t,s]=(0,a.useState)({}),[r,m]=(0,a.useState)(!1),f=new URLSearchParams(window.location.search).get("id");return(0,a.useEffect)(()=>{m(!0);let t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&w.then(n=>{n.retrievePaymentIntent(t).then(async t=>{let{paymentIntent:n}=t;switch(n.status){case"succeeded":let{data:a}=await p.Z.post("visa/order",{id:f,orderNumber:n.id});if(a.status){let i=async()=>{let t=e.query.id;if(void 0===t&&(t=new URLSearchParams(window.location.search).get("id")),t){let{data:n}=await p.Z.get("visa/applications/".concat(t));s(n)}};i(),m(!1),x.ZP.success(a.msg)}else x.ZP.error(a.msg);break;case"processing":x.ZP.error("Your payment was not successful, please try again."),await p.Z.post("visa/cancel",{id:f}),e.push("/payment-failed");default:x.ZP.error("Something went wrong")}})})},[]),(0,n.jsxs)("div",{className:"page-wrapper",children:[(0,n.jsx)(c(),{children:(0,n.jsxs)("title",{children:[o.Z.templateName," | Payment Confirmation"]})}),Object.keys(t).length>0?(0,n.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(d.Z,{sx:{maxWidth:480,marginTop:"4rem",marginBottom:"4rem"},children:(0,n.jsxs)(u.Z,{children:[(0,n.jsxs)(l.Z,{sx:{width:"90%",margin:"auto",textAlign:"center",padding:3},children:[(0,n.jsx)("img",{style:{width:60,marginBottom:15},src:"https://uploads-ssl.webflow.com/63503c8eb379085bf5801bda/63503c8eb3790818cf801dd1_check.svg",alt:"img"}),(0,n.jsx)(h.Z,{variant:"h4",children:"Your payment has been received and processed successfully."})]}),(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(h.Z,{variant:"h5",children:"Your Visa Application:"}),(0,n.jsxs)(h.Z,{children:[t._id," has been submitted successfully."]}),(0,n.jsx)(h.Z,{children:"You will receive an SMS and email shortly with details of your application."})]}),(0,n.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)("button",{className:"payment-back-btn",onClick:()=>e.push("/home"),children:"Back"}),(0,n.jsx)("a",{className:"download-application-btn",href:"".concat("/uploads","/pdfs/").concat(t.persons[0].pdf),download:t._id+".pdf",target:"_blank",rel:"noreferrer",children:"Download your application"})]})]})})}):(0,n.jsx)(l.Z,{sx:{height:"50vh"}}),(0,n.jsx)(g,{isLoading:r})]})};j.guestGuard=!0;var y=j}},function(e){e.O(0,[6991,9774,2888,179],function(){return e(e.s=75180)}),_N_E=e.O()}]);